<div
    class="font-sans antialiased text-gray-900 leading-normal tracking-wider bg-cover"
    style="background-image:url('https://source.unsplash.com/1L71sPT5XKc');">
    <div
        class="max-w-4xl flex items-center h-auto lg:h-full flex-wrap mx-auto my-28 lg:my-0">

        <!--Main Col-->
        <div id="profile"
            class="w-full lg:w-3/5 rounded-lg lg:rounded-l-lg lg:rounded-r-none shadow-2xl bg-white opacity-75 mx-6 lg:mx-0">

            <div class="p-4 md:p-12 text-center lg:text-left">
                <!-- Image for mobile view-->
                {{#if user.profileimage}}
                <div
                    class="block lg:hidden rounded-full shadow-xl mx-auto -mt-16 h-48 w-48 bg-cover bg-center"
                    style="background-image: url(data:image/{{user.profileImage.contentType}};base64,{{base64img}})"></div>
                {{else}}
                <div
                    class="block lg:hidden rounded-full shadow-xl mx-auto -mt-16 h-48 w-48 bg-cover bg-center"
                    style="background-image: url(https://freesvg.org/img/abstract-user-flat-4.png)"></div>
                {{/if}}
                <h1 class="text-3xl font-bold pt-8 lg:pt-0">{{user.first_name}}
                    {{user.last_name}}</h1>
                <div
                    class="mx-auto lg:mx-0 w-4/5 pt-3 border-b-2 border-green-500 opacity-25"></div>
                <p
                    class="pt-8 text-base font-bold flex items-center justify-center lg:justify-start"><svg
                        xmlns="http://www.w3.org/2000/svg" width="24"
                        height="24" viewBox="0 0 24 24"><path
                            fill="currentColor" fill-opacity="0"
                            d="M12 11L4 6H20L12 11Z"><animate fill="freeze"
                                attributeName="fill-opacity" begin="1s"
                                dur="0.15s" values="0;0.3" /></path><g
                            fill="none" stroke="currentColor"
                            stroke-linecap="round" stroke-width="2"><rect
                                width="18" height="14" x="3" y="5"
                                stroke-dasharray="64" stroke-dashoffset="64"
                                rx="1"><animate fill="freeze"
                                    attributeName="stroke-dashoffset" dur="0.6s"
                                    values="64;0" /></rect><path
                                stroke-dasharray="24" stroke-dashoffset="24"
                                d="M3 6.5L12 12L21 6.5"><animate fill="freeze"
                                    attributeName="stroke-dashoffset"
                                    begin="0.6s" dur="0.4s" values="24;0" /></path></g></svg>
                    {{user.email}}</p>
                <p
                    class="pt-6 text-gray-600 text-xs lg:text-sm flex items-center justify-center lg:justify-start"><svg
                        xmlns="http://www.w3.org/2000/svg" width="24"
                        height="24" viewBox="0 0 24 24"><path
                            fill="currentColor"
                            d="M12 3.75a3.75 3.75 0 1 0 0 7.5a3.75 3.75 0 0 0 0-7.5Zm-4 9.5A3.75 3.75 0 0 0 4.25 17v1.188c0 .754.546 1.396 1.29 1.517c4.278.699 8.642.699 12.92 0a1.537 1.537 0 0 0 1.29-1.517V17A3.75 3.75 0 0 0 16 13.25h-.34c-.185 0-.369.03-.544.086l-.866.283a7.251 7.251 0 0 1-4.5 0l-.866-.283a1.752 1.752 0 0 0-.543-.086H8Z" /></svg>
                    {{user.age}} years</p>

                <form action="/api/sessions/updateProfile" method="POST"
                    enctype="multipart/form-data" class="form-control my-5">
                    <input type="file" name="profileImage" id="profileImage"
                        onchange="enableUpdateButton()"
                        class="file-input file-input-bordered file-input-accent file-input-sm w-full max-w-xs"
                        accept=".jpg, .png, .jpeg, .webp" />

                    <div class="pt-6">
                        <button type="submit" id="updateButton"
                            class="bg-green-700 hover:bg-green-900 text-white font-bold py-2 px-4 rounded-full disabled:btn-disabled disabled:text-gray-500"
                            disabled>
                            Update photo
                        </button>
                    </div>
                </form>

                <div
                    class="mx-auto lg:mx-0 w-4/5 pt-3 border-b-2 border-green-500 opacity-25"></div>

                <div class="flex flex-row items-center text-center gap-5 my-5">
                    <p
                        class="text-gray-600 text-xs lg:text-sm flex items-center justify-center lg:justify-start"><svg
                            xmlns="http://www.w3.org/2000/svg" width="24"
                            height="24" viewBox="0 0 24 24"><path
                                fill="currentColor"
                                d="M15 21h-2a2 2 0 0 1 0-4h2v-2h-2a4 4 0 0 0 0 8h2Zm8-2a4 4 0 0 1-4 4h-2v-2h2a2 2 0 0 0 0-4h-2v-2h2a4 4 0 0 1 4 4Z" /><path
                                fill="currentColor"
                                d="M14 18h4v2h-4zm-7 1a5.989 5.989 0 0 1 .09-1H3v-1.4c0-2 4-3.1 6-3.1a8.548 8.548 0 0 1 1.35.125A5.954 5.954 0 0 1 13 13h5V4a2.006 2.006 0 0 0-2-2h-4.18a2.988 2.988 0 0 0-5.64 0H2a2.006 2.006 0 0 0-2 2v14a2.006 2.006 0 0 0 2 2h5.09A5.989 5.989 0 0 1 7 19ZM9 2a1 1 0 1 1-1 1a1.003 1.003 0 0 1 1-1Zm0 4a3 3 0 1 1-3 3a2.996 2.996 0 0 1 3-3Z" /></svg>
                        Your role is: <span class="uppercase font-bold">{{user.role}}</span></p>
                </div>

                {{#if adminflag}}
                {{else}}

                {{#if completed}}
                {{#if userflag}}
                <p
                    class="text-green-800 text-center font-bold text-sm lg:text-sm flex items-center justify-center">
                    All documents were uploaded correctly! <br>Upgrade Premium!
                </p>
                {{/if}}
                <button type="submit"
                    class="m-auto my-3 flex btn btn-info btn-sm"
                    onclick="changeRole()">{{#if userflag}}Upgrade to
                    premium{{else}}Change to user{{/if}}</button>

                {{else}}
                {{#if premiumflag}}
                <button type="submit"
                    class="m-auto my-3 flex btn btn-info btn-sm"
                    onclick="changeRole()">Change to user</button>
                {{else}}
                <p
                    class="text-black font-bold text-sm lg:text-sm flex items-center justify-center lg:justify-start">
                    Wanna upgrade to premium? Upload all your documents!
                </p>
                <form action="/api/users/{{user._id}}/documents" method="POST"
                    enctype="multipart/form-data">
                    <div class="flex flex-col my-3 gap-5">
                        <div
                            class="flex columns-2 items-center  gap-5 justify-between">
                            <p class="text-left">Identificaci√≥n:</p>
                            {{#if doc1}}
                            <svg style="color: rgb(55, 201, 44);"
                                xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink"
                                width="40" zoomAndPan="magnify"
                                viewBox="0 0 30 30.000001" height="40"
                                preserveAspectRatio="xMidYMid meet"
                                version="1.0"><defs><clippath id="id1"><path
                                            d="M 2.328125 4.222656 L 27.734375 4.222656 L 27.734375 24.542969 L 2.328125 24.542969 Z M 2.328125 4.222656 "
                                            clip-rule="nonzero" fill="#37c92c"></path></clippath></defs><g
                                    clip-path="url(#id1)"><path fill="#37c92c"
                                        d="M 27.5 7.53125 L 24.464844 4.542969 C 24.15625 4.238281 23.65625 4.238281 23.347656 4.542969 L 11.035156 16.667969 L 6.824219 12.523438 C 6.527344 12.230469 6 12.230469 5.703125 12.523438 L 2.640625 15.539062 C 2.332031 15.84375 2.332031 16.335938 2.640625 16.640625 L 10.445312 24.324219 C 10.59375 24.472656 10.796875 24.554688 11.007812 24.554688 C 11.214844 24.554688 11.417969 24.472656 11.566406 24.324219 L 27.5 8.632812 C 27.648438 8.488281 27.734375 8.289062 27.734375 8.082031 C 27.734375 7.875 27.648438 7.679688 27.5 7.53125 Z M 27.5 7.53125 "
                                        fill-opacity="1" fill-rule="nonzero"></path></g></svg>
                            {{else}}
                            <input
                                class="m-0 block w-1/2 cursor-pointer rounded border border-solid border-neutral-300 bg-clip-padding px-3 py-[0.32rem] text-xs font-normal text-neutral-700 transition duration-300 ease-in-out file:-mx-3 file:-my-[0.32rem] file:cursor-pointer file:overflow-hidden file:rounded-none file:border-0 file:border-solid file:border-inherit file:bg-neutral-100 file:px-3 file:py-[0.32rem] file:text-neutral-700 file:transition file:duration-150 file:ease-in-out file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] hover:file:bg-neutral-200 focus:border-primary focus:text-neutral-700 focus:shadow-te-primary focus:outline-none dark:border-neutral-600 dark:text-neutral-200 dark:file:bg-cyan-900 dark:file:text-neutral-100 dark:focus:border-primary"
                                type="file" name="identificacion"
                                id="identificacion" accept=".pdf, .doc, .docx"
                                onchange="enableUpload(this)" />
                            {{/if}}
                        </div>

                        <div
                            class="flex columns-2 items-center  gap-5 justify-between">
                            <p class="text-left">Domicilio:</p>
                            {{#if doc2}}
                            <svg style="color: rgb(55, 201, 44);"
                                xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink"
                                width="40" zoomAndPan="magnify"
                                viewBox="0 0 30 30.000001" height="40"
                                preserveAspectRatio="xMidYMid meet"
                                version="1.0"><defs><clippath id="id1"><path
                                            d="M 2.328125 4.222656 L 27.734375 4.222656 L 27.734375 24.542969 L 2.328125 24.542969 Z M 2.328125 4.222656 "
                                            clip-rule="nonzero" fill="#37c92c"></path></clippath></defs><g
                                    clip-path="url(#id1)"><path fill="#37c92c"
                                        d="M 27.5 7.53125 L 24.464844 4.542969 C 24.15625 4.238281 23.65625 4.238281 23.347656 4.542969 L 11.035156 16.667969 L 6.824219 12.523438 C 6.527344 12.230469 6 12.230469 5.703125 12.523438 L 2.640625 15.539062 C 2.332031 15.84375 2.332031 16.335938 2.640625 16.640625 L 10.445312 24.324219 C 10.59375 24.472656 10.796875 24.554688 11.007812 24.554688 C 11.214844 24.554688 11.417969 24.472656 11.566406 24.324219 L 27.5 8.632812 C 27.648438 8.488281 27.734375 8.289062 27.734375 8.082031 C 27.734375 7.875 27.648438 7.679688 27.5 7.53125 Z M 27.5 7.53125 "
                                        fill-opacity="1" fill-rule="nonzero"></path></g></svg>
                            {{else}}
                            <input
                                class="m-0 block w-1/2 cursor-pointer rounded border border-solid border-neutral-300 bg-clip-padding px-3 py-[0.32rem] text-xs font-normal text-neutral-700 transition duration-300 ease-in-out file:-mx-3 file:-my-[0.32rem] file:cursor-pointer file:overflow-hidden file:rounded-none file:border-0 file:border-solid file:border-inherit file:bg-neutral-100 file:px-3 file:py-[0.32rem] file:text-neutral-700 file:transition file:duration-150 file:ease-in-out file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] hover:file:bg-neutral-200 focus:border-primary focus:text-neutral-700 focus:shadow-te-primary focus:outline-none dark:border-neutral-600 dark:text-neutral-200 dark:file:bg-cyan-900 dark:file:text-neutral-100 dark:focus:border-primary"
                                type="file" name="domicilio" id="domicilio"
                                accept=".pdf, .doc, .docx"
                                onchange="enableUpload(this)" />
                            {{/if}}
                        </div>

                        <div
                            class="flex columns-2 items-center  gap-5 justify-between">
                            <p class="text-left">Estado de cuenta:</p>
                            {{#if doc3}}
                            <svg style="color: rgb(55, 201, 44);"
                                xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink"
                                width="40" zoomAndPan="magnify"
                                viewBox="0 0 30 30.000001" height="40"
                                preserveAspectRatio="xMidYMid meet"
                                version="1.0"><defs><clippath id="id1"><path
                                            d="M 2.328125 4.222656 L 27.734375 4.222656 L 27.734375 24.542969 L 2.328125 24.542969 Z M 2.328125 4.222656 "
                                            clip-rule="nonzero" fill="#37c92c"></path></clippath></defs><g
                                    clip-path="url(#id1)"><path fill="#37c92c"
                                        d="M 27.5 7.53125 L 24.464844 4.542969 C 24.15625 4.238281 23.65625 4.238281 23.347656 4.542969 L 11.035156 16.667969 L 6.824219 12.523438 C 6.527344 12.230469 6 12.230469 5.703125 12.523438 L 2.640625 15.539062 C 2.332031 15.84375 2.332031 16.335938 2.640625 16.640625 L 10.445312 24.324219 C 10.59375 24.472656 10.796875 24.554688 11.007812 24.554688 C 11.214844 24.554688 11.417969 24.472656 11.566406 24.324219 L 27.5 8.632812 C 27.648438 8.488281 27.734375 8.289062 27.734375 8.082031 C 27.734375 7.875 27.648438 7.679688 27.5 7.53125 Z M 27.5 7.53125 "
                                        fill-opacity="1" fill-rule="nonzero"></path></g></svg>
                            {{else}}
                            <input
                                class="m-0 block w-1/2 cursor-pointer rounded border border-solid border-neutral-300 bg-clip-padding px-3 py-[0.32rem] text-xs font-normal text-neutral-700 transition duration-300 ease-in-out file:-mx-3 file:-my-[0.32rem] file:cursor-pointer file:overflow-hidden file:rounded-none file:border-0 file:border-solid file:border-inherit file:bg-neutral-100 file:px-3 file:py-[0.32rem] file:text-neutral-700 file:transition file:duration-150 file:ease-in-out file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] hover:file:bg-neutral-200 focus:border-primary focus:text-neutral-700 focus:shadow-te-primary focus:outline-none dark:border-neutral-600 dark:text-neutral-200 dark:file:bg-cyan-900 dark:file:text-neutral-100 dark:focus:border-primary"
                                type="file" name="estadoDeCuenta"
                                id="estadoDeCuenta"
                                accept=".pdf, .doc, .docx"
                                onchange="enableUpload(this)" />
                            {{/if}}
                        </div>

                    </div>
                    <button type="submit" id="docsUpload"
                        class="btn btn-outline btn-info btn-sm disabled:btn-disabled disabled:text-gray-500"
                        disabled>Upload</button>
                </form>
                {{/if}}
                {{/if}}
                {{/if}}
            </div>
        </div>

        <!--Img Col-->
        <div class="w-full lg:w-2/5">

            <label tabindex="0" class="avatar mr-5 -ml-5">
                <div class="w-full rounded-full">
                    {{#if user.profileimage}}
                    <img class="rounded-none lg:rounded-lg shadow-2xl hidden lg:block"
                        src="data:image/{{user.profileImage.contentType}};base64,{{base64img}}" />
                    {{else}}
                    <img class="rounded-none lg:rounded-lg shadow-2xl hidden lg:block"
                        src="https://freesvg.org/img/abstract-user-flat-4.png" />
                    {{/if}}
                </div>
            </label>
        </div>
    </div>

</div>
<script src="/js/profile.js"></script>