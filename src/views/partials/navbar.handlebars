<div id="loading"
    class="hidden bg-opacity-80 backdrop-filter backdrop-blur fixed top-0 right-0 h-screen w-screen z-50 justify-center items-center">
    <svg class="lp" viewBox="0 0 128 128" width="128px" height="128px"
        xmlns="http://www.w3.org/2000/svg">
        <defs>
            <lineargradient id="grad1" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#000" />
                <stop offset="100%" stop-color="#fff" />
            </lineargradient>
            <mask id="mask1">
                <rect x="0" y="0" width="128" height="128" fill="url(#grad1)" />
            </mask>
        </defs>
        <g fill="none" stroke-linecap="round" stroke-width="16">
            <circle class="lp__ring" r="56" cx="64" cy="64" stroke="#ddd" />
            <g stroke="hsl(183,90%,40%)">
                <polyline class="lp__fall-line" points="64,8 64,120" />
                <polyline class="lp__fall-line lp__fall-line--delay1"
                    points="64,8 64,120" />
                <polyline class="lp__fall-line lp__fall-line--delay2"
                    points="64,8 64,120" />
                <polyline class="lp__fall-line lp__fall-line--delay3"
                    points="64,8 64,120" />
                <polyline class="lp__fall-line lp__fall-line--delay4"
                    points="64,8 64,120" />
                <circle class="lp__drops" r="56" cx="64" cy="64"
                    transform="rotate(90,64,64)" />
                <circle class="lp__worm" r="56" cx="64" cy="64"
                    transform="rotate(-90,64,64)" />
            </g>
            <g stroke="hsl(93,90%,40%)" mask="url(#mask1)">
                <polyline class="lp__fall-line" points="64,8 64,120" />
                <polyline class="lp__fall-line lp__fall-line--delay1"
                    points="64,8 64,120" />
                <polyline class="lp__fall-line lp__fall-line--delay2"
                    points="64,8 64,120" />
                <polyline class="lp__fall-line lp__fall-line--delay3"
                    points="64,8 64,120" />
                <polyline class="lp__fall-line lp__fall-line--delay4"
                    points="64,8 64,120" />
                <circle class="lp__drops" r="56" cx="64" cy="64"
                    transform="rotate(90,64,64)" />
                <circle class="lp__worm" r="56" cx="64" cy="64"
                    transform="rotate(-90,64,64)" />
            </g>
        </g>
    </svg>
</div>

<div class="navbar bg-base-100 py-5 flex-col sm:flex-row gap-3">
    <div class="flex-1 mx-4">
        <a class="btn btn-ghost btn-outline normal-case text-xl"
            href="/views/products">Home</a>
    </div>
    <input style="display: none;" readonly id="pagina" value={{pagina}}>
    {{#if flag}}
    <input style="display: none;" readonly id="cartId" value={{cartId}}>
    <input style="display: none;" readonly id="userId" value={{user._id}}>
    <div class="flex flex-col-reverse gap-3 my-4
    md:flex-row md:gap-3">
        {{#if adminflag}}
        <button type="button" class="px-6 py-2 border rounded-md
            dark:bg-blue-400 dark:text-black-900 dark:border-blue-400"
            onclick="goCreateProd()">
            <span class="text-white font-bold">Create
                a product</span>
        </button>
        {{else}}
        <button type="button" class="px-6 my-1 py-2 border rounded-md
            dark:bg-emerald-700 dark:text-black-900 dark:border-emerald-400"
            onclick="goChat()">
            <span class="text-white font-bold">Go to
                chat</span>
        </button>
        {{/if}}
        {{#if premiumflag}}
        <button type="button" class="px-6 my-1 py-2 border rounded-md
            dark:bg-blue-400 dark:text-black-900 dark:border-blue-400"
            onclick="goCreateProd()">
            <span class="text-white font-bold">Create
                a
                product</span>
        </button>
        {{/if}}
        <div class="flex flex-col sm:flex-row justify-center items-center gap-2">
            <div class="mx-5 flex flex-row items-center gap-3">
                <p class="text-white">Hi, {{user.first_name}} {{user.last_name}}</p>
                <div class="dropdown dropdown-end mx-2">
                    <label tabindex="0" class="btn btn-ghost btn-circle avatar">
                        <div class="w-14 rounded-full">
                            {{#if user.profileimage}}
                            <img
                                src="data:image/{{user.profileImage.contentType}};base64,{{base64img}}" />
                            {{else}}
                            <img
                                src="https://freesvg.org/img/abstract-user-flat-4.png" />
                            {{/if}}
                        </div>
                    </label>
                    <ul tabindex="0"
                        class="menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52">
                        <li>
                            <a class="justify-between" onclick="goProfile()">
                                Profile
                            </a>
                        </li>
                        <li><a id="logout">Logout</a></li>
                    </ul>
                </div>
            </div>

            {{#if adminflag}}
            {{else}}
            <div class="dropdown dropdown-end sm:mr-4">
                <label tabindex="0" class="btn btn-ghost btn-circle">
                    <div class="indicator">
                        <svg xmlns="http://www.w3.org/2000/svg"
                            class="h-10 w-10"
                            fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="1"
                                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293
                2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0
                000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                        <span id="cartl1" class="badge badge-sm indicator-item">{{user.cart.products.length}}</span>
                    </div>
                </label>
                <div tabindex="0"
                    class="mt-3 card card-compact dropdown-content w-52
          bg-base-100 shadow">
                    <div class="card-body">
                        <span id="cartl2" class="font-bold text-lg">{{user.cart.products.length}}
                            products</span>
                        <div class="card-actions">
                            <button class="btn btn-primary btn-block"
                                onclick="goCart()">View
                                cart</button>
                        </div>
                    </div>
                </div>
            </div>
            {{/if}}
        </div>
    </div>
    {{else}}
    <button class="btn btn-primary mx-4" onclick="goLogin()">Login</button>
    <button class="btn btn-secondary mx-4" onclick="goSignUp()">Sign Up</button>
    {{/if}}
</div>